<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Sistema de Gesti√≥n Cl√≠nica</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f5f7fa;
      }

      .navbar {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px 40px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .navbar-brand {
        font-size: 24px;
        font-weight: bold;
      }

      .navbar-user {
        display: flex;
        align-items: center;
        gap: 20px;
      }

      .user-info {
        text-align: right;
      }

      .user-name {
        font-weight: 600;
        font-size: 16px;
      }

      .user-role {
        font-size: 13px;
        opacity: 0.9;
      }

      .btn-logout {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        padding: 8px 20px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.3s ease;
      }

      .btn-logout:hover {
        background: rgba(255, 255, 255, 0.3);
      }

      .container {
        max-width: 1200px;
        margin: 40px auto;
        padding: 0 20px;
      }

      .welcome-section {
        background: white;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 30px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
      }

      .welcome-section h1 {
        color: #333;
        margin-bottom: 10px;
      }

      .welcome-section p {
        color: #666;
        font-size: 16px;
      }

      .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 25px;
        margin-top: 30px;
      }

      .dashboard-card {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        cursor: pointer;
      }

      .dashboard-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      }

      .card-icon {
        font-size: 48px;
        margin-bottom: 15px;
      }

      .card-title {
        font-size: 20px;
        font-weight: 600;
        color: #333;
        margin-bottom: 10px;
      }

      .card-description {
        color: #666;
        font-size: 14px;
        line-height: 1.5;
      }

      .card-link {
        display: inline-block;
        margin-top: 15px;
        color: #667eea;
        font-weight: 600;
        text-decoration: none;
        font-size: 14px;
      }

      .card-link:hover {
        text-decoration: underline;
      }

      .role-badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        margin-top: 5px;
      }

      .role-recursos-humanos {
        background: #e3f2fd;
        color: #1976d2;
      }
      .role-personal-administrativo {
        background: #f3e5f5;
        color: #7b1fa2;
      }
      .role-soporte-informacion {
        background: #fff3e0;
        color: #e65100;
      }
      .role-enfermera {
        background: #e8f5e9;
        color: #2e7d32;
      }
      .role-medico {
        background: #fce4ec;
        color: #c2185b;
      }
    </style>
  </head>
  <body>
    <nav class="navbar">
      <div class="navbar-brand">üè• Sistema de Gesti√≥n Cl√≠nica</div>
      <div class="navbar-user">
        <div class="user-info">
          <div class="user-name" id="userName"></div>
          <div class="user-role" id="userRole"></div>
        </div>
        <button class="btn-logout" onclick="logout()">Cerrar Sesi√≥n</button>
      </div>
    </nav>

    <div class="container">
      <div class="welcome-section">
        <h1 id="welcomeTitle"></h1>
        <p>Seleccione una opci√≥n del men√∫ para comenzar a trabajar</p>
      </div>

      <div class="dashboard-grid" id="dashboardGrid">
        <!-- Las tarjetas se generar√°n din√°micamente seg√∫n el rol -->
      </div>
    </div>

    <script>
      // Verificar autenticaci√≥n
      const usuario = JSON.parse(localStorage.getItem("usuario"));

      if (!usuario) {
        window.location.href = "/login.html";
      }

      // Mostrar informaci√≥n del usuario
      document.getElementById("userName").textContent = usuario.nombre;
      document.getElementById("userRole").textContent = getRoleName(
        usuario.rol
      );
      document.getElementById(
        "welcomeTitle"
      ).textContent = `¬°Bienvenido/a, ${usuario.nombre}!`;

      function getRoleName(rol) {
        const roles = {
          RECURSOS_HUMANOS: "Recursos Humanos",
          PERSONAL_ADMINISTRATIVO: "Personal Administrativo",
          SOPORTE_INFORMACION: "Soporte de Informaci√≥n",
          ENFERMERA: "Enfermera",
          MEDICO: "M√©dico",
        };
        return roles[rol] || rol;
      }

      function getRoleClass(rol) {
        return "role-" + rol.toLowerCase().replace(/_/g, "-");
      }

      // Configurar tarjetas seg√∫n el rol
      function setupDashboard() {
        const grid = document.getElementById("dashboardGrid");
        let cards = [];

        switch (usuario.rol) {
          case "RECURSOS_HUMANOS":
            cards = [
              {
                icon: "üë•",
                title: "Gesti√≥n de Empleados",
                desc: "Crear, modificar y eliminar empleados del sistema",
                url: "#",
              },
              {
                icon: "üìä",
                title: "Reportes de Personal",
                desc: "Ver estad√≠sticas y reportes del personal",
                url: "#",
              },
              {
                icon: "üìã",
                title: "Gesti√≥n de Roles",
                desc: "Administrar roles y permisos",
                url: "#",
              },
            ];
            break;

          case "PERSONAL_ADMINISTRATIVO":
            cards = [
              {
                icon: "üè•",
                title: "Registrar Paciente",
                desc: "Registrar nuevos pacientes en el sistema",
                url: "#",
              },
              {
                icon: "üìÖ",
                title: "Agendar Citas",
                desc: "Programar citas m√©dicas",
                url: "#",
              },
              {
                icon: "üí∞",
                title: "Facturaci√≥n",
                desc: "Generar facturas y gestionar pagos",
                url: "#",
              },
              {
                icon: "üìÑ",
                title: "Ver Pacientes",
                desc: "Consultar informaci√≥n de pacientes",
                url: "#",
              },
            ];
            break;

          case "SOPORTE_INFORMACION":
            cards = [
              {
                icon: "üíä",
                title: "Inventario Medicamentos",
                desc: "Gestionar medicamentos disponibles",
                url: "#",
              },
              {
                icon: "üî¨",
                title: "Procedimientos",
                desc: "Administrar procedimientos m√©dicos",
                url: "#",
              },
              {
                icon: "üß™",
                title: "Ayudas Diagn√≥sticas",
                desc: "Gestionar ex√°menes y ayudas",
                url: "#",
              },
              {
                icon: "‚öïÔ∏è",
                title: "Especialidades",
                desc: "Administrar especialidades m√©dicas",
                url: "#",
              },
            ];
            break;

          case "ENFERMERA":
            cards = [
              {
                icon: "üìù",
                title: "Registro de Visitas",
                desc: "Registrar signos vitales de pacientes",
                url: "#",
              },
              {
                icon: "üíâ",
                title: "Administrar Medicamentos",
                desc: "Registrar medicamentos aplicados",
                url: "#",
              },
              {
                icon: "üè•",
                title: "Ver Pacientes",
                desc: "Consultar informaci√≥n de pacientes",
                url: "#",
              },
            ];
            break;

          case "MEDICO":
            cards = [
              {
                icon: "üìã",
                title: "Historia Cl√≠nica",
                desc: "Consultar y actualizar historias cl√≠nicas",
                url: "#",
              },
              {
                icon: "üìù",
                title: "Crear √ìrdenes",
                desc: "Generar √≥rdenes m√©dicas",
                url: "#",
              },
              {
                icon: "üîç",
                title: "Ver Pacientes",
                desc: "Consultar pacientes asignados",
                url: "#",
              },
              {
                icon: "üíä",
                title: "Recetar Medicamentos",
                desc: "Prescribir medicamentos",
                url: "#",
              },
            ];
            break;

          default:
            cards = [
              {
                icon: "‚ùå",
                title: "Sin Acceso",
                desc: "No tiene permisos asignados",
                url: "#",
              },
            ];
        }

        grid.innerHTML = cards
          .map(
            (card) => `
                <div class="dashboard-card" onclick="navigateTo('${card.url}')">
                    <div class="card-icon">${card.icon}</div>
                    <div class="card-title">${card.title}</div>
                    <div class="card-description">${card.desc}</div>
                    <span class="role-badge ${getRoleClass(
                      usuario.rol
                    )}">${getRoleName(usuario.rol)}</span>
                </div>
            `
          )
          .join("");
      }

      function navigateTo(url) {
        if (url === "#") {
          alert("Esta funcionalidad estar√° disponible pr√≥ximamente");
        } else {
          window.location.href = url;
        }
      }

      function logout() {
        if (confirm("¬øEst√° seguro que desea cerrar sesi√≥n?")) {
          localStorage.removeItem("usuario");
          window.location.href = "/login.html";
        }
      }

      // Inicializar dashboard
      setupDashboard();
    </script>
  </body>
</html>
